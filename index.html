<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">

  <link rel="stylesheet" href="main.css">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:wght@400;600;700&display=swap"
    rel="stylesheet">

  <title>Frontend Mentor | Rock, Paper, Scissors</title>

</head>

<body>
  <header class="header">
    <h1 class="header__h1">rock<br>paper<br>scissors</h1>
    <div id="scoreContainer" class="header__scoreContainer">
      <p>score</p>
      <p id="score"></p>
    </div>
  </header>

  <main id="playContainer" class="game">
    <section class="game__playContainer">
      <article class="game__playContainer__article">
        <div id="playerChoice" class="game__playContainer__article__div__empty">
          <p>click to pick</p>
        </div>
      </article>
      <article class="game__playContainer__article">
        <div class="game__playContainer__article__div scissors">
          <img src="./images/icon-scissors.svg" alt="">
        </div>
        <p>the house picked</p>
      </article>
    </section>
    <button id="rulesButton" class="game__rules">rules</button>
  </main>

  <div id="choice" class="choiceContainer">
    <section class="choiceContainer__section rock">
      <img src="./images/icon-rock.svg" alt="">
    </section>
    <section class="choiceContainer__section paper">
      <img src="./images/icon-paper.svg" alt="">
    </section>
    <section class="choiceContainer__section scissors">
      <img src="./images/icon-scissors.svg" alt="">
    </section>
  </div>

  <main class="home">
    <h1 id="playButton">play</h1>
  </main>

  <div id="rules" class="rules">
    <p>rules</p>
    <img src="./images/image-rules.svg" height="35%" alt="">
    <img id="crossRules" src="./images/icon-close.svg" width="25rem" alt="">
  </div>

  <div id="shadow"></div>


  <footer class="footer">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>. Coded by <a
      href="#">Eliott Raheriarisoa</a>.
  </footer>

  <script>
    var playButton = document.getElementById('playButton');
    var scoreContainer = document.getElementById('scoreContainer');
    var playContainer = document.getElementById('playContainer');
    var rulesButton = document.getElementById('rulesButton');
    var crossRules = document.getElementById('crossRules');
    var rulesContainer = document.getElementById('rules');
    var textScore = document.getElementById('score');
    var choice = document.getElementById('choice');
    var playerChoice = document.getElementById('playerChoice');
    let shadow = document.getElementById('shadow');
    var attributeObject = document.getElementsByClassName('choiceContainer__section');


    playButton.onclick = function letsPlay() {
      playButton.style.display = "none";
      scoreContainer.style.display = "flex";
      playContainer.style.display = "flex";
    }

    rulesButton.onclick = function showRules() {
      rulesContainer.style.display = "flex"
    }

    crossRules.onclick = function closeRules() {
      rulesContainer.style.removeProperty('display')
    }

    //player choice
    playerChoice.onclick = function clicToChoose() {
      choice.style.display = "flex";
      shadow.style.display = "block";
    }


    //shadow
    shadow.onclick = function leaveShadow() {
      shadow.style.removeProperty('display')
      choice.style.removeProperty('display')
    }


    //choose object
    choice.onclick = function chooseObject(e) {
      if (e.target != choice) {
        choice.style.removeProperty('display')
        shadow.style.removeProperty('display')

        if (playerChoice.classList.contains('game__playContainer__article__div__empty')) {
          playerChoice.classList.replace('game__playContainer__article__div__empty', 'game__playContainer__article__div');
          playerChoice.removeChild(playerChoice.firstElementChild);
        }

        var imgObject = document.createElement('img');
        var index__data = e.target.attributes["index-data"].value;

        switch (parseInt(index__data)) {
          case 0:
            if (playerChoice.classList.contains('paper')) {
              playerChoice.classList.remove('paper')
            }
            if (playerChoice.classList.contains('scissors')) {
              playerChoice.classList.remove('scissors')
            }

            playerChoice.classList.add('rock');

            if (!playerChoice.firstElementChild) {
              imgObject.src = "./images/icon-rock.svg";
              playerChoice.appendChild(imgObject);
            }
            else if (playerChoice.firstElementChild.src.includes('paper') || playerChoice.firstElementChild.src.includes('scissors')) {
              playerChoice.firstElementChild.src = "./images/icon-rock.svg"
            }
            break;

          case 1:
            if (playerChoice.classList.contains('rock')) {
              playerChoice.classList.remove('rock')
            }
            if (playerChoice.classList.contains('scissors')) {
              playerChoice.classList.remove('scissors')
            }

            playerChoice.classList.add('paper');

            if (!playerChoice.firstElementChild) {
              imgObject.src = "./images/icon-paper.svg";
              playerChoice.appendChild(imgObject);
            }
            else if (playerChoice.firstElementChild.src.includes('rock') || playerChoice.firstElementChild.src.includes('scissors')) {
              playerChoice.firstElementChild.src = './images/icon-paper.svg';
            }
            break;

          case 2:
            if (playerChoice.classList.contains('paper')) {
              playerChoice.classList.remove('paper')
            }
            if (playerChoice.classList.contains('rock')) {
              playerChoice.classList.remove('rock')
            }

            playerChoice.classList.add('scissors');

            if (!playerChoice.firstElementChild) {
              imgObject.src = "./images/icon-scissors.svg";
              playerChoice.appendChild(imgObject);
            }
            else if (playerChoice.firstElementChild.src.includes('paper') || playerChoice.firstElementChild.src.includes('rock')) {
              playerChoice.firstElementChild.src = './images/icon-scissors.svg';
            }
            break;
        }
      }
    }

    //setAttribute
    var i = attributeObject.length;
    var index_data = i - 1;

    while (i--) {
      attributeObject[i].setAttribute("index-data", index_data);
      attributeObject[i].firstElementChild.setAttribute("index-data", index_data);
      index_data--;
    }

    //place object in game




    // document.onclick = function test(e) {
    //   console.log(e.target.attributes["index-data"].textContent)
    // }

    //SCORE
    var score = 0;

    textScore.innerText = score;
    // window.onload = function countScore() {
    //   if 
    // }
  </script>
</body>

</html>